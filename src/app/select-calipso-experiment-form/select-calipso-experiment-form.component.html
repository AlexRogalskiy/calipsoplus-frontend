<app-facility-nav></app-facility-nav>

<div class="row col">
  <app-experiment-nav></app-experiment-nav>

  <!-- experiments list -->
  <div class="col">
    <h1>Experiments</h1>
    <table class="table">
      <thead>
        <tr class="d-flex">
          <th class="col-sm-3">Title</th>
          <th class="col-sm-2">Proposal Id</th>
          <th class="col-sm-4">Abstract</th>
          <th class="col-sm-1">Beamline</th>
          <th class="col-sm-2"></th>
        </tr>
      </thead>
      <tbody>
        <tr class="d-flex" *ngFor="let experiment of experiments">
          <td class="col-sm-3">{{experiment.subject}}</td>
          <td class="col-sm-2">{{experiment.serial_number}}</td>
          <td class="col-sm-4">{{experiment.body | slice:0:106}}
            <img src='assets/magnifier.svg' width="20px" height="20px" alt="<!>" title="{{experiment.body}}" />
          </td>
          <td class="col-sm-1">{{experiment.beam_line}}</td>
          <td class="col-sm-2">
            <div [ngSwitch]="statusActiveExperiments[experiment.serial_number]">
              <button *ngSwitchCase="0" class="btn btn-primary" (click)="run(experiment.serial_number)">Launch!</button>
              <button *ngSwitchCase="1" class="btn btn-warning">
                <span class="fa fa-refresh fa-spin">&nbsp;</span>&nbsp;&nbsp;Wait&nbsp;&nbsp;</button>

              <button *ngSwitchCase="2" class="center-text btn btn-danger" (click)="stop_and_remove_container(experiment.serial_number)">Stop</button>
              <button *ngSwitchCase="2" class="btn btn-primary" (click)="go_in(experiment.serial_number)">ENTER</button>

              <button *ngSwitchCase="3" class="btn btn-danger">Fully</button>
              <li *ngSwitchDefault>Error</li>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
